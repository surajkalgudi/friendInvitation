<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Sameera & Sanjana - Wedding Invitation</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Great+Vibes&family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <script>
      if ("scrollRestoration" in history) history.scrollRestoration = "manual";
      window.scrollTo(0, 0);
      document.documentElement.scrollTop = 0;
    </script>
    <style>
      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --deep-red: #8b1a1a;
        --gold: #c9a84c;
        --light-gold: #e8d5a3;
        --cream: #fff8f0;
        --dark: #2c1810;
        --white: #ffffff;
      }

      html {
        overscroll-behavior-y: contain;
        -webkit-overflow-scrolling: touch;
      }

      html.snap-enabled {
        scroll-snap-type: y mandatory;
      }

      body {
        font-family: "Cormorant Garamond", serif;
        background: var(--cream);
        color: var(--dark);
        overflow-x: hidden;
        overscroll-behavior-y: contain;
      }

      /* ===== FULL VIEWPORT SECTIONS ===== */
      .full-section {
        height: 100vh;
        height: 100dvh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        scroll-snap-align: start;
        scroll-snap-stop: always;
        overflow: hidden;
      }

      /* ===== CURTAIN SECTION ===== */
      #curtain-section {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1000;
        cursor: pointer;
        overflow: hidden;
      }

      #curtain-section.opened {
        pointer-events: none;
      }

      #curtain-section.gone {
        display: none;
      }

      .curtain-reveal-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--cream);
        z-index: 0;
      }

      .curtain-half {
        position: absolute;
        top: -5%;
        width: 55%;
        height: 110%;
        z-index: 2;
        transition: transform 1.8s cubic-bezier(0.7, 0, 0.3, 1);
        will-change: transform;
      }

      .curtain-left {
        left: 0;
        background: repeating-linear-gradient(
          90deg,
          #7a1515 0px,
          #9b2020 3px,
          #8b1a1a 6px,
          #a52525 15px,
          #7a1515 18px,
          #8b1a1a 25px,
          #6b1010 30px,
          #9b2020 35px,
          #8b1a1a 40px
        );
        box-shadow: inset -20px 0 40px rgba(0, 0, 0, 0.3);
      }

      .curtain-right {
        right: 0;
        background: repeating-linear-gradient(
          90deg,
          #8b1a1a 0px,
          #9b2020 3px,
          #7a1515 6px,
          #a52525 15px,
          #8b1a1a 18px,
          #7a1515 25px,
          #6b1010 30px,
          #9b2020 35px,
          #7a1515 40px
        );
        box-shadow: inset 20px 0 40px rgba(0, 0, 0, 0.3);
      }

      /* Gold thread lines */
      .curtain-half::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          90deg,
          transparent 0px,
          rgba(201, 168, 76, 0.08) 1px,
          transparent 2px,
          transparent 35px
        );
        z-index: 1;
      }

      /* Sheen */
      .curtain-half::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.05) 0%,
          transparent 30%,
          transparent 70%,
          rgba(0, 0, 0, 0.1) 100%
        );
        z-index: 2;
      }

      /* Opened state - slide fully out */
      #curtain-section.opened .curtain-left {
        transform: translateX(-100%);
      }

      #curtain-section.opened .curtain-right {
        transform: translateX(100%);
      }

      .curtain-tap-hint {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        color: var(--light-gold);
        font-family: "Montserrat", sans-serif;
        font-size: 12px;
        letter-spacing: 4px;
        text-transform: uppercase;
        animation: pulse 2s ease-in-out infinite;
        text-shadow: 0 2px 15px rgba(0, 0, 0, 0.8);
        transition: opacity 0.5s ease;
      }

      #curtain-section.opened .curtain-tap-hint {
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 0.4;
        }
        50% {
          opacity: 1;
        }
      }

      /* ===== MAIN CONTENT ===== */
      #main-content {
        opacity: 0;
        transition: opacity 0.15s ease;
      }

      #main-content.visible {
        opacity: 1;
      }

      /* ===== HERO / INVITATION ===== */
      .hero {
        background: var(--cream);
        padding: 40px 20px;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background:
          radial-gradient(
            ellipse at top,
            rgba(201, 168, 76, 0.08) 0%,
            transparent 60%
          ),
          radial-gradient(
            ellipse at bottom,
            rgba(139, 26, 26, 0.05) 0%,
            transparent 60%
          );
      }

      .invitation-card {
        text-align: center;
        max-width: 500px;
        width: 100%;
        position: relative;
        z-index: 1;
      }

      .ornament {
        color: var(--gold);
        margin-bottom: 10px;
        letter-spacing: 8px;
      }

      .ornament svg {
        width: 180px;
        height: 40px;
      }

      .invite-line {
        font-family: "Montserrat", sans-serif;
        font-size: 11px;
        letter-spacing: 4px;
        text-transform: uppercase;
        color: #999;
        margin-bottom: 30px;
      }

      .couple-names {
        margin: 20px 0;
      }

      .couple-names h1 {
        font-family: "Great Vibes", cursive;
        font-size: 52px;
        color: var(--deep-red);
        font-weight: 400;
        line-height: 1.2;
      }

      .couple-names .amp {
        font-family: "Great Vibes", cursive;
        font-size: 36px;
        color: var(--gold);
        display: block;
        margin: 5px 0;
      }

      .invite-message {
        font-size: 16px;
        line-height: 1.8;
        color: #666;
        margin: 30px 0;
        font-style: italic;
      }

      .invite-date-preview {
        font-family: "Montserrat", sans-serif;
        font-size: 13px;
        letter-spacing: 3px;
        color: var(--gold);
        border-top: 1px solid var(--light-gold);
        border-bottom: 1px solid var(--light-gold);
        padding: 15px 0;
        margin-top: 30px;
      }

      .scroll-indicator {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        color: var(--gold);
        animation: bounce 2s ease-in-out infinite;
      }

      .scroll-indicator span {
        font-family: "Montserrat", sans-serif;
        font-size: 10px;
        letter-spacing: 3px;
        text-transform: uppercase;
      }

      .scroll-arrow {
        width: 20px;
        height: 20px;
        border-right: 2px solid var(--gold);
        border-bottom: 2px solid var(--gold);
        transform: rotate(45deg);
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateX(-50%) translateY(0);
        }
        50% {
          transform: translateX(-50%) translateY(10px);
        }
      }

      /* ===== SCRATCH REVEAL ===== */
      .scratch-section {
        background: var(--white);
        padding: 60px 20px;
      }

      .scratch-title {
        font-family: "Great Vibes", cursive;
        font-size: 42px;
        color: var(--dark);
        margin-bottom: 10px;
      }

      .scratch-subtitle {
        font-family: "Montserrat", sans-serif;
        font-size: 11px;
        letter-spacing: 4px;
        text-transform: uppercase;
        color: #999;
        margin-bottom: 40px;
      }

      .scratch-container {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 40px;
      }

      .scratch-card {
        width: 100px;
        height: 100px;
        position: relative;
        cursor: pointer;
        border-radius: 50%;
        overflow: hidden;
      }

      .scratch-card canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        z-index: 2;
      }

      .scratch-value {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Playfair Display", serif;
        font-size: 24px;
        font-weight: 600;
        color: var(--deep-red);
        z-index: 1;
        background: var(--cream);
        border-radius: 50%;
        border: 2px solid var(--light-gold);
      }

      .scratch-value small {
        font-size: 18px;
        font-weight: 400;
        display: block;
      }

      .date-revealed {
        text-align: center;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.8s ease;
      }

      .date-revealed.show {
        opacity: 1;
        transform: translateY(0);
      }

      .revealed-text {
        font-family: "Great Vibes", cursive;
        font-size: 28px;
        color: var(--deep-red);
        margin-top: 20px;
      }

      /* Confetti */
      .confetti-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 999;
      }

      .confetti-piece {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
      }

      /* ===== COUNTDOWN ===== */
      .countdown-section {
        background: var(--cream);
        padding: 60px 20px;
        text-align: center;
      }

      .countdown-title {
        font-family: "Great Vibes", cursive;
        font-size: 42px;
        color: var(--dark);
        margin-bottom: 40px;
      }

      .countdown-grid {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
        max-width: 500px;
        margin: 0 auto 30px;
      }

      .countdown-box {
        background: var(--white);
        border-radius: 12px;
        padding: 20px 15px;
        min-width: 80px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(201, 168, 76, 0.2);
      }

      .countdown-number {
        font-family: "Playfair Display", serif;
        font-size: 36px;
        font-weight: 700;
        color: var(--deep-red);
        line-height: 1;
      }

      .countdown-label {
        font-family: "Montserrat", sans-serif;
        font-size: 10px;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: #999;
        margin-top: 8px;
      }

      .countdown-message {
        font-family: "Cormorant Garamond", serif;
        font-size: 18px;
        color: #888;
        font-style: italic;
      }

      /* ===== VIDEO SECTION ===== */
      .video-section {
        background: var(--cream);
        padding: 0;
        position: relative;
        scroll-snap-align: start;
        display: flex;
        flex-direction: column;
      }

      .video-wrapper {
        flex: 1;
        min-height: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        background: var(--cream);
      }

      .video-wrapper video {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .action-bar {
        flex-shrink: 0;
        display: flex;
        justify-content: center;
        gap: 16px;
        padding: 20px 20px;
        background: var(--cream);
        border-top: 1px solid var(--light-gold);
      }

      .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 14px 28px;
        border-radius: 30px;
        font-family: "Montserrat", sans-serif;
        font-size: 11px;
        letter-spacing: 2px;
        text-transform: uppercase;
        text-decoration: none;
        cursor: pointer;
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
        border: none;
        font-weight: 500;
      }

      .action-btn:active {
        transform: scale(0.96);
      }

      .action-btn svg {
        width: 18px;
        height: 18px;
        flex-shrink: 0;
      }

      .rsvp-btn {
        background: var(--deep-red);
        color: var(--white);
        box-shadow: 0 4px 15px rgba(139, 26, 26, 0.3);
      }

      .rsvp-btn svg {
        fill: none;
        stroke: var(--white);
      }

      .calendar-btn {
        background: var(--white);
        border: 2px solid var(--gold);
        color: var(--dark);
      }

      .calendar-btn svg {
        fill: none;
        stroke: var(--gold);
      }

      /* Body lock when modal is open */
      body.modal-open {
        overflow: hidden !important;
        position: fixed;
        width: 100%;
        height: 100%;
      }

      /* RSVP Modal */
      .rsvp-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: flex-start;
        justify-content: center;
        z-index: 2000;
        padding: 40px 20px;
        animation: modalFadeIn 0.3s ease;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .rsvp-modal .modal-content {
        background: var(--white);
        padding: 30px;
        border-radius: 16px;
        text-align: center;
        max-width: 400px;
        width: 100%;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      }

      .rsvp-modal .modal-content h3 {
        font-family: "Great Vibes", cursive;
        font-size: 36px;
        color: var(--gold);
        margin-bottom: 20px;
      }

      .rsvp-modal .form-group {
        margin-bottom: 14px;
      }

      .rsvp-modal input,
      .rsvp-modal select,
      .rsvp-modal textarea {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e8e8e8;
        border-radius: 8px;
        font-family: "Cormorant Garamond", serif;
        font-size: 16px;
        transition: border-color 0.3s ease;
        box-sizing: border-box;
        outline: none;
      }

      .rsvp-modal input:focus,
      .rsvp-modal select:focus,
      .rsvp-modal textarea:focus {
        border-color: var(--gold);
      }

      .rsvp-modal textarea {
        min-height: 80px;
        resize: vertical;
      }

      .rsvp-modal .submit-btn {
        width: 100%;
        padding: 13px;
        background: var(--gold);
        color: var(--white);
        border: none;
        border-radius: 8px;
        font-family: "Montserrat", sans-serif;
        font-size: 13px;
        letter-spacing: 2px;
        text-transform: uppercase;
        cursor: pointer;
        margin-bottom: 10px;
        transition: background 0.3s ease;
      }

      .rsvp-modal .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .rsvp-modal .modal-close {
        padding: 10px 25px;
        border: 2px solid var(--gold);
        background: transparent;
        color: var(--gold);
        border-radius: 20px;
        cursor: pointer;
        font-family: "Cormorant Garamond", serif;
        font-size: 16px;
      }

      /* ===== FLOATING MUSIC TOGGLE ===== */
      .music-toggle {
        position: fixed;
        top: 24px;
        right: 24px;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: var(--deep-red);
        border: 2px solid var(--gold);
        color: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1500;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transition:
          transform 0.2s ease,
          opacity 0.3s ease;
        opacity: 0;
        pointer-events: none;
      }

      .music-toggle.visible {
        opacity: 1;
        pointer-events: auto;
      }

      .music-toggle:active {
        transform: scale(0.9);
      }

      .music-toggle svg {
        width: 22px;
        height: 22px;
        fill: none;
        stroke: var(--white);
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .music-toggle .music-off {
        display: none;
      }

      .music-toggle.muted .music-on {
        display: none;
      }

      .music-toggle.muted .music-off {
        display: block;
      }

      @media (max-width: 380px) {
        .action-btn {
          padding: 12px 20px;
          font-size: 10px;
          gap: 8px;
        }
        .action-bar {
          gap: 10px;
          padding: 16px 15px;
        }
        .music-toggle {
          top: 18px;
          right: 18px;
          width: 42px;
          height: 42px;
        }
      }

      /* ===== FOOTER ===== */
      .footer {
        text-align: center;
        padding: 60px 20px;
        background: var(--dark);
        color: var(--light-gold);
        scroll-snap-align: start;
      }

      .footer h3 {
        font-family: "Great Vibes", cursive;
        font-size: 32px;
        margin-bottom: 15px;
        color: var(--gold);
      }

      .footer p {
        font-family: "Montserrat", sans-serif;
        font-size: 12px;
        letter-spacing: 2px;
        opacity: 0.7;
      }

      /* ===== ANIMATIONS ===== */
      .fade-up {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .fade-up.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* ===== RESPONSIVE ===== */
      @media (max-width: 480px) {
        .couple-names h1 {
          font-size: 42px;
        }
        .scratch-title {
          font-size: 34px;
        }
        .countdown-title {
          font-size: 34px;
        }
        .countdown-box {
          min-width: 70px;
          padding: 15px 10px;
        }
        .countdown-number {
          font-size: 28px;
        }
        .event-page h3 {
          font-size: 40px;
        }
        .scratch-card {
          width: 85px;
          height: 85px;
        }
      }
    </style>
  </head>
  <body>
    <!-- ===== CURTAIN OVERLAY ===== -->
    <div id="curtain-section">
      <div class="curtain-reveal-bg"></div>
      <div class="curtain-half curtain-left"></div>
      <div class="curtain-half curtain-right"></div>
      <div class="curtain-tap-hint">Tap to Open</div>
    </div>

    <!-- ===== MAIN CONTENT ===== -->
    <div id="main-content">
      <!-- HERO / INVITATION -->
      <section class="full-section hero">
        <div class="invitation-card fade-up">
          <div class="ornament">
            <svg
              viewBox="0 0 200 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M100 5 C95 0, 85 0, 80 5 C75 10, 80 18, 85 15 C80 20, 90 25, 100 20 C110 25, 120 20, 115 15 C120 18, 125 10, 120 5 C115 0, 105 0, 100 5Z"
                fill="#C9A84C"
                opacity="0.3"
              />
              <path
                d="M60 20 Q80 10, 100 20 Q120 10, 140 20"
                stroke="#C9A84C"
                stroke-width="1"
                fill="none"
              />
              <circle cx="40" cy="20" r="2" fill="#C9A84C" opacity="0.5" />
              <circle cx="160" cy="20" r="2" fill="#C9A84C" opacity="0.5" />
              <path
                d="M20 20 L35 20"
                stroke="#C9A84C"
                stroke-width="0.5"
                opacity="0.5"
              />
              <path
                d="M165 20 L180 20"
                stroke="#C9A84C"
                stroke-width="0.5"
                opacity="0.5"
              />
            </svg>
          </div>
          <p class="invite-line">Together with their families</p>
          <div class="couple-names">
            <h1>Sameera</h1>
            <span class="amp">&</span>
            <h1>Sanjana</h1>
          </div>
          <p class="invite-message">
            We would like to invite you to celebrate with us as we join our
            lives together. It would be an honor to have you with us on our
            special day.
          </p>
          <div class="invite-date-preview">
            APRIL 2026 &bull; TAMPA, FLORIDA
          </div>
        </div>
        <div class="scroll-indicator">
          <span>Scroll</span>
          <div class="scroll-arrow"></div>
        </div>
      </section>

      <!-- SCRATCH TO REVEAL -->
      <section class="full-section scratch-section" id="scratch-section">
        <h2 class="scratch-title fade-up">Reveal</h2>
        <p class="scratch-subtitle fade-up">SCRATCH TO DISCOVER THE DATE</p>
        <div class="scratch-container fade-up">
          <div class="scratch-card" data-value="19">
            <div class="scratch-value">19</div>
            <canvas></canvas>
          </div>
          <div class="scratch-card" data-value="Apr">
            <div class="scratch-value"><small>Apr</small></div>
            <canvas></canvas>
          </div>
          <div class="scratch-card" data-value="2026">
            <div class="scratch-value">2026</div>
            <canvas></canvas>
          </div>
        </div>
        <div class="date-revealed" id="date-revealed">
          <p class="revealed-text">We're getting married!</p>
        </div>
        <div class="confetti-container" id="confetti-container"></div>
      </section>

      <!-- COUNTDOWN -->
      <section class="full-section countdown-section" id="countdown-section">
        <h2 class="countdown-title fade-up">Countdown</h2>
        <div class="countdown-grid fade-up">
          <div class="countdown-box">
            <div class="countdown-number" id="cd-days">---</div>
            <div class="countdown-label">Days</div>
          </div>
          <div class="countdown-box">
            <div class="countdown-number" id="cd-hours">--</div>
            <div class="countdown-label">Hours</div>
          </div>
          <div class="countdown-box">
            <div class="countdown-number" id="cd-mins">--</div>
            <div class="countdown-label">Minutes</div>
          </div>
          <div class="countdown-box">
            <div class="countdown-number" id="cd-secs">--</div>
            <div class="countdown-label">Seconds</div>
          </div>
        </div>
        <p class="countdown-message fade-up">Until the big day</p>
      </section>

      <!-- ===== VIDEO INVITATION ===== -->
      <section class="full-section video-section" id="video-section">
        <div class="video-wrapper">
          <video id="invitation-video" loop muted playsinline>
            <source src="Invitation.mp4" type="video/mp4" />
          </video>
        </div>
        <div class="action-bar">
          <button class="action-btn rsvp-btn" id="rsvp-btn">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            RSVP
          </button>
          <button class="action-btn calendar-btn" id="add-to-calendar-btn">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            Calendar
          </button>
        </div>
      </section>

      <!-- Background Music -->
      <audio id="bg-music" loop preload="auto">
        <source src="background-music.mp3" type="audio/mpeg" />
      </audio>
    </div>

    <!-- Floating Music Toggle -->
    <button class="music-toggle" id="music-toggle" aria-label="Toggle music">
      <svg class="music-on" viewBox="0 0 24 24">
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
      </svg>
      <svg class="music-off" viewBox="0 0 24 24">
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <line x1="23" y1="9" x2="17" y2="15"></line>
        <line x1="17" y1="9" x2="23" y2="15"></line>
      </svg>
    </button>

    <script>
      // ===== CURTAIN OPEN =====
      const curtainSection = document.getElementById("curtain-section");
      const mainContent = document.getElementById("main-content");

      // Always start at top on load/reload
      if ("scrollRestoration" in history) history.scrollRestoration = "manual";
      window.scrollTo({ top: 0, left: 0, behavior: "instant" });
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;

      // Prevent scroll while curtain is showing
      document.body.style.overflow = "hidden";

      // Handle pageshow (back-forward cache / pull-to-refresh)
      window.addEventListener("pageshow", function (e) {
        if (
          e.persisted ||
          !document.documentElement.classList.contains("snap-enabled")
        ) {
          window.scrollTo({ top: 0, left: 0, behavior: "instant" });
          document.documentElement.scrollTop = 0;
          document.body.scrollTop = 0;
        }
      });

      curtainSection.addEventListener("click", function () {
        if (this.classList.contains("opened")) return;
        this.classList.add("opened");

        // Start background music and show toggle
        const bgMusic = document.getElementById("bg-music");
        bgMusic.play().catch(() => {});
        document.getElementById("music-toggle").classList.add("visible");

        // Show content immediately as curtains start moving
        mainContent.classList.add("visible");

        setTimeout(() => {
          // Pin scroll to top before enabling anything
          window.scrollTo(0, 0);
          document.documentElement.scrollTop = 0;
          document.body.scrollTop = 0;
          document.body.style.overflow = "";
          // Small delay to let browser settle, then enable snap
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              document.documentElement.classList.add("snap-enabled");
            });
          });
        }, 400);

        setTimeout(() => {
          this.classList.add("gone");
        }, 1900);
      });

      // ===== SCROLL ANIMATIONS =====
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        },
        { threshold: 0.15 },
      );

      document
        .querySelectorAll(".fade-up")
        .forEach((el) => observer.observe(el));

      // ===== SCRATCH CARDS =====
      let scratchRevealed = false;
      const scratchCards = document.querySelectorAll(".scratch-card");

      scratchCards.forEach((card) => {
        const canvas = card.querySelector("canvas");
        const ctx = canvas.getContext("2d");
        let isScratching = false;

        function initCanvas() {
          const rect = card.getBoundingClientRect();
          if (rect.width === 0) return;
          canvas.width = rect.width * 2;
          canvas.height = rect.height * 2;
          canvas.style.width = rect.width + "px";
          canvas.style.height = rect.height + "px";
          ctx.scale(2, 2);

          const gradient = ctx.createRadialGradient(
            rect.width / 2,
            rect.height / 2,
            0,
            rect.width / 2,
            rect.height / 2,
            rect.width / 2,
          );
          gradient.addColorStop(0, "#D4C5A0");
          gradient.addColorStop(0.3, "#C9B896");
          gradient.addColorStop(0.5, "#B8A67E");
          gradient.addColorStop(0.7, "#C9B896");
          gradient.addColorStop(1, "#A89668");

          ctx.fillStyle = gradient;
          ctx.beginPath();
          ctx.arc(
            rect.width / 2,
            rect.height / 2,
            rect.width / 2,
            0,
            Math.PI * 2,
          );
          ctx.fill();
        }

        setTimeout(initCanvas, 300);
        // Reinit on resize
        window.addEventListener("resize", () => setTimeout(initCanvas, 100));

        function scratch(x, y) {
          const rect = canvas.getBoundingClientRect();
          const sx = x - rect.left;
          const sy = y - rect.top;
          ctx.globalCompositeOperation = "destination-out";
          ctx.beginPath();
          ctx.arc(sx, sy, 20, 0, Math.PI * 2);
          ctx.fill();
          checkScratchPercent();
        }

        function checkScratchPercent() {
          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
          let transparent = 0;
          for (let i = 3; i < imageData.data.length; i += 4) {
            if (imageData.data[i] === 0) transparent++;
          }
          const pct = transparent / (imageData.data.length / 4);
          if (pct > 0.35 && !scratchRevealed) revealDate();
        }

        canvas.addEventListener("mousedown", () => (isScratching = true));
        canvas.addEventListener("mouseup", () => (isScratching = false));
        canvas.addEventListener("mouseleave", () => (isScratching = false));
        canvas.addEventListener("mousemove", (e) => {
          if (isScratching) scratch(e.clientX, e.clientY);
        });

        canvas.addEventListener(
          "touchstart",
          (e) => {
            e.preventDefault();
            isScratching = true;
          },
          { passive: false },
        );
        canvas.addEventListener("touchend", () => (isScratching = false));
        canvas.addEventListener(
          "touchmove",
          (e) => {
            e.preventDefault();
            if (isScratching)
              scratch(e.touches[0].clientX, e.touches[0].clientY);
          },
          { passive: false },
        );
      });

      // Scratch cards are purely interactive - no auto-reveal

      function revealDate() {
        if (scratchRevealed) return;
        scratchRevealed = true;
        scratchCards.forEach((card) => {
          const c = card.querySelector("canvas");
          c.style.transition = "opacity 0.6s ease";
          c.style.opacity = "0";
        });
        setTimeout(
          () => document.getElementById("date-revealed").classList.add("show"),
          400,
        );
        launchConfetti();
      }

      // ===== CONFETTI =====
      function launchConfetti() {
        const container = document.getElementById("confetti-container");
        const colors = [
          "#C9A84C",
          "#8B1A1A",
          "#E8D5A3",
          "#FF6B6B",
          "#FFD93D",
          "#6BCB77",
          "#4D96FF",
          "#FF69B4",
        ];

        for (let i = 0; i < 150; i++) {
          const piece = document.createElement("div");
          piece.className = "confetti-piece";
          const color = colors[Math.floor(Math.random() * colors.length)];
          const size = 5 + Math.random() * 12;
          const isCircle = Math.random() > 0.5;

          piece.style.width = size + "px";
          piece.style.height = isCircle ? size + "px" : size * 0.4 + "px";
          piece.style.left = 5 + Math.random() * 90 + "%";
          piece.style.top = "-20px";
          piece.style.borderRadius = isCircle ? "50%" : "2px";
          piece.style.background = color;

          container.appendChild(piece);

          piece.animate(
            [
              {
                transform: "translateY(0) translateX(0) rotate(0deg)",
                opacity: 1,
              },
              {
                transform: `translateY(${window.innerHeight + 100}px) translateX(${-150 + Math.random() * 300}px) rotate(${Math.random() * 1080}deg)`,
                opacity: 0,
              },
            ],
            {
              duration: 2500 + Math.random() * 2500,
              delay: Math.random() * 1000,
              easing: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
              fill: "forwards",
            },
          );
        }
        setTimeout(() => {
          container.innerHTML = "";
        }, 6000);
      }

      // ===== COUNTDOWN =====
      const weddingDate = new Date("2026-04-19T07:00:00-04:00");

      function updateCountdown() {
        const diff = weddingDate - new Date();
        if (diff <= 0) {
          ["cd-days", "cd-hours", "cd-mins", "cd-secs"].forEach(
            (id) => (document.getElementById(id).textContent = "0"),
          );
          return;
        }
        document.getElementById("cd-days").textContent = Math.floor(
          diff / 86400000,
        );
        document.getElementById("cd-hours").textContent = Math.floor(
          (diff % 86400000) / 3600000,
        );
        document.getElementById("cd-mins").textContent = Math.floor(
          (diff % 3600000) / 60000,
        );
        document.getElementById("cd-secs").textContent = Math.floor(
          (diff % 60000) / 1000,
        );
      }
      updateCountdown();
      setInterval(updateCountdown, 1000);

      // ===== VIDEO PLAYBACK =====
      const video = document.getElementById("invitation-video");
      const videoObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              video.play().catch(() => {});
            } else {
              video.pause();
            }
          });
        },
        { threshold: 0.3 },
      );
      videoObserver.observe(document.getElementById("video-section"));

      // ===== BACKGROUND MUSIC =====
      const bgMusic = document.getElementById("bg-music");
      bgMusic.volume = 0.3;
      let musicUserPaused = false; // tracks if user manually muted
      const musicToggle = document.getElementById("music-toggle");

      // Toggle music on/off
      musicToggle.addEventListener("click", function () {
        if (bgMusic.paused) {
          bgMusic.play().catch(() => {});
          musicToggle.classList.remove("muted");
          musicUserPaused = false;
        } else {
          bgMusic.pause();
          musicToggle.classList.add("muted");
          musicUserPaused = true;
        }
      });

      // Pause music when user leaves/minimizes Safari (or any browser)
      document.addEventListener("visibilitychange", function () {
        if (document.hidden) {
          bgMusic.pause();
        } else {
          // Resume only if user hasn't manually muted
          if (!musicUserPaused && musicToggle.classList.contains("visible")) {
            bgMusic.play().catch(() => {});
          }
        }
      });

      // Also handle pagehide for Safari bfcache
      window.addEventListener("pagehide", function () {
        bgMusic.pause();
      });

      // ===== GOOGLE SHEETS RSVP =====
      const GOOGLE_SHEETS_API =
        "https://script.google.com/macros/s/AKfycbxBichUOY9mANTJsXugaiQsCLN7mX5ARh5Mx8Ak3WdV2Xx_kbDZoSSLceF6kOOvcIfy/exec";

      document
        .getElementById("rsvp-btn")
        .addEventListener("click", function () {
          const modal = document.createElement("div");
          modal.className = "rsvp-modal";
          modal.innerHTML = `
        <div class="modal-content">
          <h3>RSVP</h3>
          <form id="rsvpForm">
            <div class="form-group">
              <input type="text" id="guestName" name="name" placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <input type="tel" id="guestPhone" name="phone" placeholder="Your Phone Number" required>
            </div>
            <div class="form-group">
              <select id="attending" name="attending" required>
                <option value="">Will you attend?</option>
                <option value="Joyfully Accept">Joyfully Accept</option>
                <option value="Regretfully Decline">Regretfully Decline</option>
              </select>
            </div>
            <div class="form-group">
              <input type="number" id="guests" name="guests" placeholder="Number of Guests" min="1" max="10">
            </div>
            <div class="form-group">
              <textarea id="message" name="message" placeholder="Message for the couple (optional)"></textarea>
            </div>
            <button type="submit" class="submit-btn">Send RSVP</button>
          </form>
          <button class="modal-close">Close</button>
        </div>
      `;
          // Lock scroll to prevent snap glitches
          const scrollY = window.scrollY;
          document.body.classList.add("modal-open");
          document.body.style.top = `-${scrollY}px`;
          document.body.appendChild(modal);

          function closeModal() {
            modal.remove();
            document.body.classList.remove("modal-open");
            document.body.style.top = "";
            window.scrollTo(0, scrollY);
          }

          const submitBtn = modal.querySelector(".submit-btn");

          modal
            .querySelector("#rsvpForm")
            .addEventListener("submit", function (e) {
              e.preventDefault();
              const formData = {
                name: modal.querySelector("#guestName").value,
                phone: modal.querySelector("#guestPhone").value,
                attending: modal.querySelector("#attending").value,
                guests: modal.querySelector("#guests").value || "1",
                message: modal.querySelector("#message").value || "No message",
              };
              // Fire and forget - don't wait for response (no-cors won't return one anyway)
              fetch(GOOGLE_SHEETS_API, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(formData),
              }).catch(() => {});
              // Show success immediately
              modal.querySelector(".modal-content").innerHTML = `
          <div style="padding:30px 20px;">
            <svg viewBox="0 0 24 24" fill="none" stroke="#C9A84C" stroke-width="2" style="width:50px;height:50px;margin-bottom:15px;">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <h3>Thank You!</h3>
            <p style="font-size:16px;color:#666;margin:10px 0;">Your RSVP has been received.</p>
            <button class="modal-close" style="margin-top:15px;">Close</button>
          </div>
        `;
              modal
                .querySelector(".modal-close")
                .addEventListener("click", closeModal);
            });

          modal
            .querySelector(".modal-close")
            .addEventListener("click", closeModal);
          modal.addEventListener("click", function (e) {
            if (e.target === modal) closeModal();
          });
        });

      // ===== ADD TO CALENDAR (Apple / Android detection) =====
      const EVENT_DATA = {
        title: "Sameera & Sanjana Wedding",
        description:
          "Wedding ceremony of Sameera & Sanjana. We look forward to celebrating with you!",
        location:
          "Hindu Temple of Florida, 5509 Lynn Road, Tampa, Florida 33624",
        startDate: "2026-04-19",
        startTime: "09:30",
        endDate: "2026-04-19",
        endTime: "14:00",
      };

      document
        .getElementById("add-to-calendar-btn")
        .addEventListener("click", function () {
          const isApple = /iPad|iPhone|iPod|Macintosh/.test(
            navigator.userAgent,
          );
          if (isApple) {
            // Download .ics for Apple Calendar
            const ics = [
              "BEGIN:VCALENDAR",
              "VERSION:2.0",
              "PRODID:-//Wedding//EN",
              "BEGIN:VEVENT",
              "DTSTART:" +
                EVENT_DATA.startDate.replace(/-/g, "") +
                "T" +
                EVENT_DATA.startTime.replace(":", "") +
                "00",
              "DTEND:" +
                EVENT_DATA.endDate.replace(/-/g, "") +
                "T" +
                EVENT_DATA.endTime.replace(":", "") +
                "00",
              "SUMMARY:" + EVENT_DATA.title,
              "DESCRIPTION:" + EVENT_DATA.description,
              "LOCATION:" + EVENT_DATA.location,
              "END:VEVENT",
              "END:VCALENDAR",
            ].join("\r\n");
            const blob = new Blob([ics], {
              type: "text/calendar;charset=utf-8",
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "sameera-sanjana-wedding.ics";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          } else {
            // Google Calendar for Android / others
            const start =
              EVENT_DATA.startDate.replace(/-/g, "") +
              "T" +
              EVENT_DATA.startTime.replace(":", "") +
              "00";
            const end =
              EVENT_DATA.endDate.replace(/-/g, "") +
              "T" +
              EVENT_DATA.endTime.replace(":", "") +
              "00";
            const params = new URLSearchParams({
              action: "TEMPLATE",
              text: EVENT_DATA.title,
              details: EVENT_DATA.description,
              location: EVENT_DATA.location,
              dates: start + "/" + end,
            });
            window.open(
              "https://calendar.google.com/calendar/render?" +
                params.toString(),
              "_blank",
            );
          }
        });
    </script>
  </body>
</html>
